<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">

    <!-- Font Awesome CDN -->
    <script src="https://kit.fontawesome.com/5139f7b44b.js" crossorigin="anonymous"></script>

    <!-- Main Css -->
    <link rel="stylesheet" href="static\core/css/style.css" type="text/css">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  </head>
  <body>
    <header>
      <div class="container" style="margin-bottom: 1%;">
          <div class="row">
              <div class="col-md-6">
                  <img src="static\core/img/logo.png" alt="Jardineria">
              </div>
              <div class="col-md-6" style="text-align: end;">

                  <ul class="social-header list-inline text-xs-right">
                      <li class="list-inline-item">
                          <a href="https://www.facebook.com/login.php">
                              <span class="fa-stack fa.lg">
                                  <i class="fas fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                          </a>
                          <a href="https://twitter.com/i/flow/login">
                              <span class="fa-stack fa.lg">
                                  <i class="fas fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                          </a>
                          <a href="https://www.youtube.com/">
                              <span class="fa-stack fa.lg">
                                  <i class="fas fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                          </a>
                          <a href="https://www.instagram.com/accounts/login/">
                              <span class="fa-stack fa.lg">
                                  <i class="fas fa-circle fa-stack-2x"></i>
                                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                          </a>
                      </li>
                  </ul>

              </div>
          </div>
      </div>

      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid" style="background-color: #33d80a;">
          <a class="navbar-brand" href="{% url 'Pagina' %}">Inicio</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="{% url 'quienes_somos' %}">Quienes somos</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'p' %}">Productos</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Categorias
                </a>
              
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="{% url 'Macetero' 4 %}">Maceteros</a></li>
                  <li><a class="dropdown-item" href="{% url 'Flores' 3 %}">Flores</a></li>
                  <li><a class="dropdown-item" href="{% url 'tierra_de_hojas' 2 %}">Tierra de hojas</a></li>
                  <li><a class="dropdown-item" href="{% url 'Arbustos' 1 %}">Arbustos</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="{% url 'p' %}">Ver todos los productos</a></li>
                </ul>
              </li>
              <!--
                <li class="nav-item">
                <a class="nav-link disabled">Disabled</a>
              </li>
            -->
            <li class="nav-item" > 
              <a class="nav-link"  href="{% url 'inicio' %}">Cerrar Sesión</a>
            </li>
            
            </ul>
            <form class="d-flex">
              <input class="form-control me-2" type="search" placeholder="Buscar en JardiLife.cl" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Buscar</button>
            </form>
            <div style="margin: 1%;">
              <i class="fa-solid fa-cart-shopping" data-bs-toggle="modal" data-bs-target="#modalcarrito"></i>
            </div>
          </div>
        </div>
      </nav>
    </header>
      <!--modal carrito-->
      <div class="modal fade" id="modalcarrito" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Carrito de Compra</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="container-fluid">
                <div class="col-md-12">
                    <img id="img_pt"  src="https://th.bing.com/th/id/OIP.9bIt7MWy8o24bItqrZ2pzAAAAA?pid=ImgDet&rs=1" >
                    <h2 style="text-align: right;">Macetero Marron Grande</h2>
                    <p class="text" style="text-align: right;">Valor: $4900</p>
                </div>
                <div class="col-md-12">
                  <img id="img_pt"  src="https://th.bing.com/th/id/OIP.9bIt7MWy8o24bItqrZ2pzAAAAA?pid=ImgDet&rs=1">
                  <h2 style="text-align: right;">Macetero Marron Grande</h2>
                  <p class="text" style="text-align: right;">Valor: $4900</p>
                </div>

                 <!-- Api Carrito -->
                 <div class="container-fluid">
                  <div class="row">
                      <h6>Seleccione la region, provincia y comuna de envio</h6>
                  </div>
                  <div class="row g-2">
                      <div class="col-md-12">
                          <select id="regiones">
                              <option active>Seleccione region</option>
                          </select>
          
                      </div>
                      <div class="col-md-12">
                          <select id="provincia"></select>
                      </div>
                      <div class="col-md-12">
                          <select id="comunas"></select>
                      </div>
                  </div>
          
              </div>
              
              <!-- Api regiones Carro de Compras-->
              <script>
                $.get("https://apis.digital.gob.cl/dpa/regiones", function (data) {
                    $.each(data, function (i, data) {
                        $("#regiones").append("<option value='" + data.codigo + "'>" + data.nombre + "</option>");
                    });
                });
        
                $("#regiones").change(function () {
                    $()
                    $("#provincia").empty();
                    $.get("https://apis.digital.gob.cl/dpa/regiones/" + $("#regiones").val() + "/provincias", function (data) {
                        $.each(data, function (i, data) {
                            $("#provincia").append("<option value='" + data.codigo + "'>" + data.nombre + "</option>");
                        });
                    });
                });
        
                $("#provincia").change(function () {
                    $("#comunas").empty();
                    $.get("https://apis.digital.gob.cl/dpa/provincias/" + $("#provincia").val() + "/comunas", function (data) {
                        $.each(data, function (i, data) {
                            $("#comunas").append("<option value='" + data.codigo + "'>" + data.nombre + "</option>");
                        });
                    });
                });
            </script>

              <hr></hr>

                <div class="col-md-12" style="text-align: right;">
                  <h2>Total a Pagar:$9800</h2>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary">Pagar</button>
            </div>
          </div>
        </div>
      </div>

       <h2>Todos nuestros productos</h2>

      <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-6">

                    <strong>JardiLife</strong> &copy;2022- Todos los derechos reservados. Sitio diseñado por <a href="#">Alvaro Farias, Byron Román y Felipe Prieto</a>


                </div>
                <div class="col-sm-6 text-xs-right">

                    <ul class="list-inline">
                        <li class="list-inline-item">
                        <a href="#">Inicio</a>
                        </li>
                        <li class="list-inline-item">
                        <a href="#">Aviso Legal</a>
                        </li>
                        <li class="list-inline-item">
                        <a href="#">Cookies</a>
                        </li>
                        <li class="list-inline-item">
                        <a href="#">Contacto</a>
                        </li>
                        
                        
                    </ul>


                </div>
            </div>
        </div>

      </footer>

      <!-- Agregar productos al carro de compras -->
      
      <script>
        //Creacion de objeto JSON
        num = 1;
    
        var lista = [];
    
        //Agregar
        $("#btnAgregar").click(function () {
            var personaje = {
                "ID": 0,
                "nombre": "",
                "precio": "",
            }
    
    
            personaje.ID = num;
            personaje.nombre = $("#txtNombre").val();
            personaje.precio = $("#numPrecio").val();;
            if ($("#chkDiff1").is(":checked")) {
                personaje.modalidad.push("Hardcore");
            }
            if ($("#chkDiff2").is(":checked")) {
                personaje.modalidad.push("Extremo");
            }
            //console.log(personaje);
    
            lista.push(personaje);
            num++;
        });
        //Listar
        $("#btnListar").click(function () {
            $("#tabla1").removeAttr("hidden");
            $("#personajes").empty();
    
            $.each(lista, function (i, item) {
    
                var diff = "";
    
                item.modalidad.forEach(x => {
                    diff = diff + x + " ";
                });
                $("#personajes").append("<tr><td>" +
                    item.ID + "</td><td>" +
                    item.nombre + "</td><td>" +
                    item.precio + "</td><td>" +
                    diff + "</td><td>" +
                    "<button type='button' class='btn btn-warning btnBorrar' id='btnBorrar' >Eliminar</button>" + "</td><td>" +
                    "<button type='button' class='btn btn-info' id='btnModificar' >Modificar</button>" + "</td></tr>"
                );
                console.log(item);
            });
        });
        //Borrar
        $("#personajes").on("click", "#btnBorrar", function () {
            var fila = $(this).closest("tr");
            var data = fila.find("td:eq(0)").text();
            for (let i = 0; i < lista.length; i++) {
                if (lista[i].ID == data) {
                    lista.splice(i, 1);
                }
            }
        });
    
        //Modificar
        $("#personajes").on("click", "#btnModificar", function () {
            var fila = $(this).closest("tr");
            var data = fila.find("td:eq(0)").text();
            lista.forEach(item => {
                console.log("ID lista: " + item.ID + " || " + "ID objeto" + data)
                if (item.ID == data) {
                    $("#txtNombre").val(item.nombre);
                    $("#numPrecio").val(item.precio);
                    if (item.modalidad[0] == "Hardcore") {
                        $("#chkDiff1").prop('checked', true);
                        if (item.modalidad[1] == "Extremo") {
                            $("#chkDiff2").prop('checked', true);
                        } else {
                            $("#chkDiff2").prop('checked', false);
                        }
                    } else if (item.modalidad[0] == "Extremo") {
                        $("#chkDiff2").prop('checked', true);
                        $("#chkDiff1").prop('checked', false);
    
                    } else {
                        $("#chkDiff1").prop('checked', false);
                        $("#chkDiff2").prop('checked', false);
                    }
                }
            });
        })
        //Limpiar Formulario
        $("#btnClean").click(function () {
            $("#tabla1").prop("hidden", true);
        });
    
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
  </body>
</html>




